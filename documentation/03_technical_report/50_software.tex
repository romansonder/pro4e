\subsection{Grobkonzept}

\subsection{Kurzeinführung in Bluetooth Low Energy}

\subsection{Aufbau des Bluetooth-Moduls}

\subsubsection{Bluetooth-Modul der Peripheriegeräte}

\subsection{Ein- und Ausgabeelemente des Dojos}

Damit der Dojo mit seiner Umwelt agiern kann wird diverse Peripherie benötigt. Als Peripherie werden alle Aktoren und Sensoren betrachtet welche auf dem Dojo angebracht sind. Diese ermöglichen es dem Museumsbesucher mit dem Gerät zu interagieren. Dieser Abschnitt erläutert die wichtigsten Zusammenhänge der einzelnen Peripherieeinheiten. Die Abbildung \ref{fig:p_uebersicht} zeigt die Verbindungen zwischen den einzelnen Komponennten.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[htb]
\begin{center}
\includegraphics[width=\textwidth]{periphery_uebersicht.jpg}
\caption{Übersicht Periphery} % picture caption
\label{fig:p_uebersicht}
\end{center}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsubsection{Audiointerface -- wtv020sd.c}
Das Modul wtv020sd.c beinhaltet die Initialisierung und Ansteuerung des Audiochip Wtv020sd \cite{WTV020}. Die Kommunikation zum Audiointerface erfolgt über die Standard GPIO (General Purpose Input Output) des nRF52. Es werden die Pins: Reset, Busy, Clk und Data verwendet. Über das Audiointerface können die Audiofiles der SD-Karte gezielt Abgespielt, Pausiert und die Audioausgabe vermindert oder verstärkt werden. Dabei handelt es sich um 16-Bit Befehle welche über ein SPI (synchroner serieller Datenbus) mit einer Geschwindigkeit von 5kHz gesendet werden.

\subsubsection{Peripherie -- ts3a27518e.c ts4871.c periphery.c }

Im Modul ts4871.c ist definiert mit welchem Pin der Audioverstärker ein- und ausgeschalten werden kann, in diesem Falle ist es der Standbypin (gem. Datenblat \cite{TS4871}). Des weiteren sind im Modul ts3a27518e.c die Pinausgänge für den Multiplexer, zwischen SD-Karte und Audiointerface definiert (gem. Datenblatt \cite{TS3A27518E}). Es kann zwischen Adio- und USB-Modus gewechselt werden.\\
Das Modul periphery.c beinhaltet die Verarbeitung der Tastereingaben und die Ausgabe des Feedbacks über den Vibrator.

\subsection{Hauptprogrammablauf}


\subsection{Java Anwendung}

Um es dem Benutzer so einfach wie möglich zu machen, wurde eine Java Anwendung gestaltet, welche Audioinformationen auf den Dojo übertragen kann. Dabei versucht die Anwendung im Prinzip nichts anderes als die SD Karte im Dojo via USB-Schnittstelle zu erkennen und dann die Audioinformationen auf die SD Karte zu kopieren. Dabei werden die Audioinformationen auch gleich so Umbenannt, dass sie zu den entsprechenden Beacons zugeordnet und abgespielt werden können. Da sich immer alle Audioinformationen in allen Sprachen auf dem Dojo befinden müssen, muss dieser Schritt auch nur bei neu dazugekommenen Kunstobjekten wiederholt werden. Weiter können mit der Anwendung Benutzerspezifische Einstellungen wie Sprache und Zugangsrechte übertragen werden. Dies geschieht jedoch im Gegensatz zu den Audioinformationen über BLE, weshalb auch der entsprechende COM-Port von Anwender selektiert werden muss.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\textwidth]{graphics/Java_Anwendung.png}
	\caption{Java Anwendung}
	\label{fig:Java Anwendung}
\end{figure}

Abbildung \ref{fig:Java Anwendung} zeigt die Java Anwendung, in der zurzeit gerade eine Ausstellung mit  drei Kunstobjekten (in allen drei Sprachen) geladen ist. Die Idee hinter dem Aufbau der Java Anwendung war, dass der Benutzer nichts falsch machen kann und auf falsche Aktionen entsprechend hingewiesen wird. Dies wurde schliesslich mittels treffenden Statusmeldungen unten links in der Statusbar umgesetzt.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\textwidth]{graphics/Dateiname.png}
	\caption{Dateiname Konventionen}
	\label{fig:Dateiname Konventionen}
\end{figure}

Abbildung wiederrum \ref{fig:Dateiname Konventionen} zeigt nach welchen Konventionen der Dateiname der Audioinformationen umbenannt wird, damit die Dateien von der Firmware erkannt und abgespielt werden kann.
